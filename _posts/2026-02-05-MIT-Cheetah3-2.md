---
title: "MIT Cheetah 3 Locomotion Control in Simulation – Part 1"
tagline: "A step-by-step implementation in MuJoCo (Go2)"
excerpt: "Probabilistic Contact Detection based on Contact Model Fusion"
categories:
  - fun
tags:
  - locomotion
  - control
author_profile: false
header:
  image: /assets/images/unsplash-image-4.jpg
  teaser: /assets/images/unsplash-image-4.jpg
---



## 목표
![Traversing Rough Terrain with Event-Based Gait Switching](/assets/images/cheetah.png)

This post implements the contact probability estimator proposed in Contact Model Fusion for Event-Based Locomotion in Unstructured Terrains, as a prerequisite for reproducing the MIT Cheetah 3 control architecture.

Cheetah3 내부는 세가지의 큰 시스템이 있고 서로 상호작용하면서 돌아간다는 것을 전 포스팅에서 짧게 브리핑했다. 1.상태 추정기, 2. 상위레벨 스케줄러, 2. 제어기. 제어기를 만드려면 명령이 있어야 하고 그 명령은 스케줄러에서 만들어진다. 스케줄러는 상태에 따라 어떤 명령을 내려야하는지 정하는 두뇌 역할을 하는데 그러기 위해 상태값에 대한 추정이 선행되어야 한다. Cheetah3 의 핵심 기술 중 하나는 내부 센서데이터의 조합만으로 로봇이 발을 디디고 있는지 아닌지를 파악하는 것이므로 leg contact detection을 제일 먼저 구현해보기로 결정.  


> Since the robot does not use any external environment sensors, a contact detection algorithm probabilistically fuses encoder measurements, estimated force, and expected gait phase to estimate the likelihood that each leg is in contact with an object [11].


여기서 인용된 [11] 논문인 *Contact Model Fusion for Event-Based Locomotion in Unstructured Terrains* 를 구현해보자.


## 구조
1. MOMENTUM-BASED DISTURBANCE OBSERVER FOR DISCRETE-TIME IMPLEMENTATION
- 로봇 동역학식 설명
  - 로봇의 기본 Equation of Motion :

$$
\mathbf{M} \ddot{\mathbf{q}}+\mathbf{C} \dot{\mathbf{q}}+\mathbf{g}=\mathbf{S}^{\top} \boldsymbol{\tau}+\sum_i \mathbf{J}_i^{\top} \mathbf{f}_i^e
$$

- 외란 설명, 식 도출
- 이산식 도출

2. PROBABILISTIC CONTACT MODEL FUSION
- 로봇발 높이 계산
{% include /diagram/robot_link.html %}
- 로봇 지지반력 계산
- 칼만 적용

3. EVENT-BASED GAIT SWITCHING


###

